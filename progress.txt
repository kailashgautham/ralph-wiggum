# Progress Tracker
# Each completed task is logged here by the agent.
# Format: [DONE] Task description

[DONE] Fix entrypoint.sh to use RALPH_SSH_KEY for dynamic SSH setup: entrypoint.sh unconditionally checks for /root/.ssh/id_ed25519 and exports GIT_SSH_COMMAND pointing at that path; docker-ralph.sh now mounts whichever key RALPH_SSH_KEY points to under its original basename (e.g. id_rsa), but entrypoint.sh never consults RALPH_SSH_KEY so the GIT_SSH_COMMAND is wrong for any key other than id_ed25519; add RALPH_SSH_KEY to docker-ralph.sh's ENV_ARGS block, then update entrypoint.sh to derive the mounted key path from RALPH_SSH_KEY (defaulting to id_ed25519) so the SSH command is always set up for the correct key
[DONE] Guard against missing known_hosts file in docker-ralph.sh: docker-ralph.sh unconditionally adds -v "$HOME/.ssh/known_hosts:/root/.ssh/known_hosts:ro" to the docker run command; if the file does not exist on the host, Docker errors with "invalid mount config for type bind: bind source path does not exist" which looks like a Ralph bug; add a file-existence check and skip the mount with a clear informational warning when ~/.ssh/known_hosts is absent, so users on fresh machines get a useful message instead of a confusing Docker error
[DONE] Add RALPH_BASE_BRANCH env var to replace the hardcoded "main" branch name: ralph.sh and ralph-once.sh both call `git checkout main` and `git pull --ff-only origin main` after each commit; repos that use "master" or any other default branch name fail silently on those lines (the `|| true` swallows the error); add a RALPH_BASE_BRANCH env var (defaulting to "main"), forward it from docker-ralph.sh's ENV_ARGS block, and substitute it everywhere "main" is hardcoded in both scripts
[DONE] Add status and --dry-run passthrough subcommands to docker-ralph.sh: docker-ralph.sh only accepts "setup", "cleanup", and a numeric max_iterations argument; the ralph.sh subcommands "status" and "--dry-run" are not accessible via the Docker wrapper, forcing users to exec into the container manually; update docker-ralph.sh so that `./docker-ralph.sh status` and `./docker-ralph.sh --dry-run` mount the repo read-only and run the corresponding ralph.sh subcommand inside the container, printing the result to stdout
[DONE] Add automatic log rotation via RALPH_LOG_KEEP env var: the logs/ directory is never pruned and grows without bound across runs; add a RALPH_LOG_KEEP env var (defaulting to 50) that, at the start of each ralph.sh run, deletes the oldest log files beyond the configured limit using `ls -t | tail -n +$((RALPH_LOG_KEEP+1)) | xargs rm -f`; forward RALPH_LOG_KEEP from docker-ralph.sh's ENV_ARGS block and document it alongside the other tuning vars
